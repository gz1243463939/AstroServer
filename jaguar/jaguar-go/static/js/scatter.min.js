function Scatter(){var t=d3.select("body"),e=[],n=500,r=500,a="zoom",i=r/n,c=d3.scaleLinear(),l=d3.scaleLinear(),o=d3.schemeCategory10,s=1,f=20,u={},d=false,v=null,g=null,h=d3.dispatch("search"),m=function(t){return s},p=function(t){return t[1]},x=function(t){return t[0]};fill=function(t){return"#7efaff"};function y(){}y.reDraw=function(){d=false;t.html(null);y.draw()};y.draw=function(){if(t.select("svg").empty()||t.select("canvas").empty())d=false;var o=d?t.select("svg"):t.append("svg").attr("width",n).attr("height",r),s=d?t.select("canvas"):t.append("canvas").attr("width",n).attr("id","scatter").attr("height",r),h=s.node().getContext("2d");if(d){if(a=="zoom")s.call(v).on(".drag",null);else if(a=="drag")s.call(g).on(".zoom",null);return}c.domain(d3.extent(e,x)).range([0,n]);l.domain(d3.extent(e,p)).range([r,0]);i=r/n;var k=d3.axisTop(c).ticks(10),w=d3.axisRight(l).ticks(10*i);var b=o.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+(r-f)+")").call(k);var E=o.append("g").attr("class","axis axis--y").attr("transform","translate(0,0)").call(w);v=d3.zoom().on("zoom",S);g=d3.drag().subject(z).on("start",R).on("drag",L).on("drag.render end.render",L);s.call(g);function z(){var t=0,n=e.length,r,a,i,o=32,s,f;for(t=0;t<n;++t){s=e[t];r=d3.event.x-c(x(s));a=d3.event.y-l(p(s));i=r*r+a*a;if(i<o)f=s,o=i}return f}function L(){console.log(d3.event.subject);if(u.click){var t=d3.event.subject;P(t)}}var P=function(t){u.click(t);var e=c(x(t));var n=l(p(t));h.strokeStyle="#30e590";h.strokeRect(e-1,n-1,4,4);h.font="16px";h.textAlign="left";h.textBaseline="top";h.fillStyle="#30e590";h.fillText("["+x(t)+" , "+p(t)+"]",e+6,n-6)};document.addEventListener("search",function(t){var n=e.filter(function(e){return e.star_id==t.star_id});if(n.length>0)P(n[0])});function R(){d3.event.sourceEvent.stopPropagation();console.log("start")}o.selectAll(".domain").style("display","none");T(c,l);function S(){var t=d3.event.transform,e=t.rescaleX(c),n=t.rescaleY(l);b.call(k.scale(e));E.call(w.scale(n));T(e,n)}function T(t,a){h.clearRect(0,0,n,r);for(var i=0,c=e.length,l,o,s;i<c;++i){l=e[i],o=t(x(l)),s=a(p(l));h.beginPath();h.fillStyle=fill(l);h.moveTo(o+2.5,s);h.arc(o,s,m(l),0,2*Math.PI);h.fill()}}d=true;return y};y.switchZommPan=function(t){if(!t)return a;a=t;return y};y.container=function(e){if(!e)return t;t=e;return y};y.width=function(t){if(!t)return n;n=t;return y};y.height=function(t){if(!t)return r;r=t;return y};y.points=function(t){if(!t)return e;e=t;return y};y.accessorX=function(t){if(!t)return x;x=t;return y};y.accessorY=function(t){if(!t)return p;p=t;return y};y.accessorR=function(t){if(!t)return m;m=t;return y};y.fill=function(t){if(!t)return fill;fill=t;return y};y.callbackMap=function(t){if(!t)return u;for(var e in t)u[e]=t[e];return y};y.searchById=function(t){var e=document.createEvent("HTMLEvents");e.initEvent("search",false,false);e.star_id=t;document.dispatchEvent(e)};return y}